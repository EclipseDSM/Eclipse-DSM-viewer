<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.ui.perspectiveExtensions">
      <perspectiveExtension
            targetID="org.eclipse.jdt.ui.JavaPerspective">
         <view
               ratio="0.5"
               relative="org.eclipse.ui.views.TaskList"
               relationship="right"
               id="com.dsmviewer.views.DSMView">
         </view>
      </perspectiveExtension>
   </extension>
   <extension
         point="org.eclipse.help.contexts">
      <contexts
            file="contexts.xml">
      </contexts>
   </extension>

   <extension
         point="org.eclipse.ui.views">
      <category
            name="DSM"
            id="DSM-viewer">
      </category>
      <view
            name="DSM View"
            icon="icons/sample.gif"
            category="DSM-viewer"
            class="com.dsmviewer.ui.views.DSMView"
            id="com.dsmviewer.views.DSMView">
      </view>
   </extension>
   <extension
         point="org.eclipse.ui.viewActions">
      <viewContribution
            id="Eclipse-DSM-viewer.DSMView"
            targetID="com.dsmviewer.views.DSMView">
      </viewContribution>
   </extension>
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            class="com.dsmviewer.ui.preferences.PreferencePage"
            id="com.dsmviewer.ui.preferences.PreferencePage"
            name="DSM-Viewer Preferences">
      </page>
   </extension>

   <!-- Popupmenu action to check selected resources (files/packages/jars) on demand -->
	<extension
        point="org.eclipse.ui.popupMenus">
        <objectContribution
            objectClass="org.eclipse.core.resources.IResource"
            adaptable="true"
            id="All supported recources">
            
            <visibility>
                <objectClass  name="org.eclipse.core.resources.IResource"/>                
            </visibility>

            <menu
                id="DSM Viewer menu"
                label="DSM Viewer menu"
                path="additions">
                <separator
                    name="xbatch"/>
            </menu>
            <action
                label="Show DS-Matrix"
                class="com.dsmviewer.dtangler.DtanglerRunner"
                enablesFor="+"                
                menubarPath="additions"                
                tooltip="Run DSM viewer"
                id="project/class DtanglerRunner"/>
        </objectContribution>


        <!-- Popupmenu action to check selected jars on demand
        <objectContribution
            objectClass="org.eclipse.core.resources.IFile"
            adaptable="true"
            id="1">
            <visibility>
                <or>
                    <objectClass  name="org.eclipse.jdt.core.ICompilationUnit"/>
                    <objectClass  name="org.eclipse.jdt.core.IType"/>
                    <and>
                        <objectClass name="org.eclipse.core.resources.IFile"/>
                        <objectState name="extension" value="jar"/>
                    </and>
                </or>
            </visibility>
            <action
                label="Show library DS matrix"
                class="com.dsmviewer.dtangler.DtanglerRunner"
                enablesFor="1"
                menubarPath="additions"
                tooltip="Show library DS matrix"
                id="jarFile DtanglerRunner">
                <selection
                    name="*.jar"
                    class="org.eclipse.core.resources.IFile"/>
            </action>
        </objectContribution>
        -->
               
    </extension>

</plugin>
